# T19 â€” PCN874 VAT Report

**Status**: ðŸ”’ Blocked (T18 must deploy first)
**Phase**: 6 â€” Reporting
**Requires**: T18 deployed
**Blocks**: T20

---

## What & Why

PCN874 is ITA's machine-readable format for the monthly/bi-monthly VAT report. VAT-registered businesses (×¢×•×¡×§ ×ž×•×¨×©×”, ×—×‘×¨×” ×‘×¢"×ž) must submit this to the tax authority. BON generates the file â€” the user downloads it and submits (or hands to their accountant). Not an API submission yet.

---

## Acceptance Criteria

- [ ] `GET /businesses/:id/reports/pcn874?year=2026&month=02` â€” download PCN874 file
- [ ] File format strictly per ITA spec: fixed-width or CSV per "×§×‘×¦×™ ×”× ×”×œ×ª ×—×©×‘×•× ×•×ª ×ž×ž×•×—×©×‘×ª" spec
- [ ] Per-record fields: document type code, date, invoice number, customer VAT number, total amount, VAT amount, allocation number (if any)
- [ ] Only includes finalized invoices (drafts excluded)
- [ ] Validated against ITA's own simulator before shipping
- [ ] "×”×•×¨×“ ×“×•×— ×ž×¢×´×ž" button in reporting section of UI
  - [ ] Month/year picker
  - [ ] Download triggers file download
- [ ] Applies only to businesses with VAT (×¢×•×¡×§ ×¤×˜×•×¨ excluded â€” they don't have VAT)
- [ ] `npm run check` passes

---

## Architecture Notes

<!-- Your notes here â€” e.g. exact PCN874 format version, how you obtained the spec, field widths, encoding (UTF-8 vs Windows-1255 â€” ITA sometimes requires the latter) -->

---

## Links

- Branch: â€”
- PR: â€”
- Deployed: â¬œ
